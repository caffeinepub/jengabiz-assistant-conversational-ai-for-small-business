{
  "kind": "build_request",
  "title": "Add chat history tabs, fix video section, implement real-time market trends, and add autonomous exchange rate table",
  "projectName": "JengaBiz Assistant",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-6",
      "text": "Refactor ChatPage to implement a tabbed interface with 'Current Chat' and 'History' tabs. Move all messages into the History tab and keep the Current Chat tab for active conversation. Preserve localStorage persistence and existing debouncing/virtualization optimizations.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "make the ai section have a history tab rather than show all the history at once"
        ]
      },
      "acceptanceCriteria": [
        "ChatPage displays two tabs: 'Current Chat' and 'History'",
        "Current Chat tab shows only the active conversation",
        "History tab displays all previous messages with virtualization",
        "Tab switching preserves scroll position and message state",
        "localStorage persistence continues to work across tabs"
      ]
    },
    {
      "id": "REQ-7",
      "text": "Fix the VideoLearningPage to resolve any display, loading, or functionality issues. Ensure video thumbnails load correctly, pagination works smoothly, and the video dialog player functions properly for all TED/YouTube content.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "fix the video section"
        ]
      },
      "acceptanceCriteria": [
        "All video thumbnails display correctly without broken images",
        "Pagination controls work smoothly across all pages",
        "Video dialog player opens and plays content without errors",
        "Lazy loading continues to function for performance",
        "Category filtering works correctly"
      ]
    },
    {
      "id": "REQ-8",
      "text": "Implement real-time market trend updates in MarketAnalysisPage by adding periodic data fetching from the backend. Configure React Query to refetch market data at regular intervals (e.g., every 5 minutes) and display a timestamp showing when data was last updated.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "make the market trend realtime"
        ]
      },
      "acceptanceCriteria": [
        "Market trend data automatically refreshes at regular intervals",
        "UI displays a 'Last updated' timestamp",
        "Charts update smoothly without jarring transitions",
        "Manual refresh button continues to work",
        "Real-time updates can be paused/resumed by the user"
      ]
    },
    {
      "id": "REQ-9",
      "text": "Add an exchange rate table component to MarketAnalysisPage displaying currency conversion rates (e.g., KES to USD, EUR, GBP). Create backend endpoints to store and retrieve exchange rate data.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "add exchange rate table"
        ]
      },
      "acceptanceCriteria": [
        "Exchange rate table displays current rates for major currencies",
        "Table shows base currency (KES) and target currencies with conversion rates",
        "Data is fetched from backend and displayed in a clear tabular format",
        "Table includes a timestamp showing when rates were last updated",
        "Rates are stored persistently in the backend"
      ]
    },
    {
      "id": "REQ-10",
      "text": "Implement autonomous daily updates for exchange rate data by creating a backend timer that fetches and updates exchange rates every 24 hours. Store the update timestamp and ensure the system continues updating even after canister upgrades.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "exchange rate table which ist to be updated everyday autonomously"
        ]
      },
      "acceptanceCriteria": [
        "Backend timer executes daily to update exchange rates",
        "Update mechanism persists across canister upgrades",
        "System logs successful and failed update attempts",
        "Update timestamp is stored and retrievable",
        "Timer can be manually triggered by admin for testing"
      ]
    }
  ],
  "constraints": [
    "Preserve existing performance optimizations (virtualization, memoization, lazy loading)",
    "Maintain localStorage persistence for chat messages",
    "Keep single-actor backend architecture",
    "Exchange rate updates must be autonomous and not require manual intervention"
  ],
  "nonGoals": [
    "Integration with external exchange rate APIs",
    "Real-time WebSocket connections for market data",
    "Historical exchange rate charting",
    "Multi-currency wallet functionality",
    "Currency conversion calculator beyond the table display"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}